<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>砖转 转注驻 锔</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #cce7ff;
  margin: 0;
  padding: 0;
  color: #333;
}

/*  转专转 注 住 专 */
header {
  position: relative;
  height: 100px;
  overflow: hidden;
  display: flex;
  justify-content: center; /* 专 转  */
  align-items: center;
}

.header-container {
  display: flex;
  align-items: center;
  gap: 15px;
  position: relative;
}

.title-text {
  font-size: 2.8em;
  font-weight: 800;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(90deg, #004080, #1a75ff);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  opacity: 0;
  transition: opacity 0.5s ease;
}

.plane {
  font-size: 2.2em;
  position: relative;
  right: -100px; /* 转 抓 住  */
  animation: planeFlight 1.8s forwards ease-in-out;
}

@keyframes planeFlight {
  0% { right: -100px; transform: rotate(-15deg); }
  100% { right: 0; transform: rotate(0deg); }
}

/*  转 祝 */
.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 20px;
}

/*  砖专转 驻砖 专爪驻 */
.search-bar {
  display: flex;
  justify-content: center;
  margin-bottom: 30px;
}

.search-inner {
  display: flex;
  align-items: center;
  width: 100%;
  max-width: 900px;
  background: #e6f2ff;
  border: 2px solid #004080;
  border-radius: 15px;
  overflow: hidden;
}

.search-inner input,
.search-inner select,
.search-inner .search-icon {
  border: none;
  outline: none;
  background: transparent;
  font-size: 1em;
  padding: 12px 10px;
}

.search-inner input { flex: 2; }
.search-inner select { flex: 1; cursor: pointer; }
.search-inner .search-icon { flex-shrink: 0; cursor: pointer; font-size: 1.5em; }

.search-inner input:focus,
.search-inner select:focus { outline: none; box-shadow: none; }

/*  拽驻 转转 */
.article-card {
  display: flex;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 15px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.12);
  transition: transform 0.2s, box-shadow 0.2s;
  text-decoration: none;
  color: inherit;
  height: 120px;
}

.article-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 18px rgba(0,0,0,0.2);
}

.article-card img {
  width: 180px;
  height: 100%;
  object-fit: cover;
  flex-shrink: 0;
}

.article-content {
  padding: 10px 15px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  overflow: hidden;
}

.article-content h2 {
  margin: 0;
  font-size: 1.3em;
  color: #004080;
  line-height: 1.3em;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
}

.article-content h3 {
  margin: 0;
  font-size: 1em;
  color: #555;
  font-weight: normal;
  line-height: 1.2em;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
}

.article-content p {
  font-size: 0.8em;
  color: #777;
  margin: 0;
}

/*  专住驻住 */
@media (max-width: 600px) {
  .search-inner { flex-direction: column; }
  .search-inner input, .search-inner select { width: 100%; flex: unset; }
  .search-inner .search-icon { align-self: flex-end; padding: 10px; }
  .article-card { flex-direction: column; height: auto; }
  .article-card img { width: 100%; height: 180px; }
  .article-content h2 { font-size: 1.2em; }
  .article-content h3 { font-size: 0.95em; }
}

/*  拽 爪驻 */
.social-floating {
  position: fixed;
  bottom: 20px;
  left: 20px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  z-index: 9999;
}

.social-floating a img {
  width: 48px;
  height: 48px;
  cursor: pointer;
  transition: transform 0.2s;
}

.social-floating a img:hover {
  transform: scale(1.1);
}
</style>
</head>

<body>

<header>
  <div class="header-container">
    <span class="title-text">砖转 转注驻</span>
    <span class="plane">锔</span>
  </div>
</header>

<div class="container">

  <!--  砖专转 驻砖 专爪驻 -->
  <div class="search-bar">
    <div class="search-inner">
      <input type="text" id="search-input" placeholder="驻砖...">
      <select id="search-field">
        <option value="">驻砖 驻  (驻爪)</option>
        <option value="content">转 转</option>
        <option value="title">转专转 转</option>
      </select>
      <select id="tag-select">
        <option value="">驻砖 驻 转转 (驻爪)</option>
      </select>
      <span class="search-icon" onclick="performSearch()"></span>
    </div>
  </div>

  <div id="news-container"></div>
</div>

<!--  拽 爪驻 -->
<div class="social-floating">
  <a href="https://t.me/AviationNewsIL" target="_blank" aria-label="Telegram">
    <img src="telegram_1.png" alt="Telegram">
  </a>
  <a href="https://whatsapp.com/channel/0029VaxalrjADTO95pRvmp3D" target="_blank" aria-label="WhatsApp">
    <img src="whatsapp_1.png" alt="WhatsApp">
  </a>
</div>

<script>
let allNews = [];

//  驻注转 转专转  专 爪
const plane = document.querySelector('.plane');
const title = document.querySelector('.title-text');
plane.addEventListener('animationend', () => {
  title.style.opacity = '1';
});

//  注转 转转
async function loadNews() {
    try {
        const response = await fetch(
          'https://stormyoutube1.github.io/AviationNewsIL.github.io/news.json?cache=' + new Date().getTime()
        );
        const newsData = await response.json();
        allNews = newsData.sort((a, b) => a.position - b.position);

        populateTagSelect();
        displayNews(allNews);
    } catch (err) {
        console.error('Error loading news:', err);
        document.getElementById('news-container').innerHTML =
          '<p>砖 注转 转转. 住 专注 转 祝.</p>';
    }
}

function populateTagSelect() {
    const tagSelect = document.getElementById('tag-select');
    const tagsSet = new Set();
    allNews.forEach(article => {
        if(article.tags) {
            article.tags.forEach(t => tagsSet.add(t));
        }
    });
    tagSelect.innerHTML = '<option value="">驻砖 驻 转转 (驻爪)</option>';
    Array.from(tagsSet).sort().forEach(tag => {
        const opt = document.createElement('option');
        opt.value = tag;
        opt.textContent = tag;
        tagSelect.appendChild(opt);
    });
}

function displayNews(newsList) {
    const container = document.getElementById('news-container');
    container.innerHTML = '';

    if(newsList.length === 0){
      container.innerHTML = '<p> 爪 转转 转转.</p>';
      return;
    }

    newsList.forEach(article => {
        const card = document.createElement('a');
        card.className = 'article-card';
        card.href = `article.html?id=${article.id}`;

        if (article.main_image) {
            const img = document.createElement('img');
            img.src = article.main_image;
            card.appendChild(img);
        }

        const contentDiv = document.createElement('div');
        contentDiv.className = 'article-content';

        const h2 = document.createElement('h2');
        h2.textContent = article.title;
        contentDiv.appendChild(h2);

        if(article.subtitle){
          const h3 = document.createElement('h3');
          h3.textContent = article.subtitle;
          contentDiv.appendChild(h3);
        }

        const writerP = document.createElement('p');
        writerP.textContent = article.writer + " | " + article.timestamp;
        contentDiv.appendChild(writerP);

        card.appendChild(contentDiv);
        container.appendChild(card);
    });
}

function performSearch() {
    const query = document.getElementById('search-input').value.trim();
    const field = document.getElementById('search-field').value;
    const tag = document.getElementById('tag-select').value;

    if((field === 'title' || field === 'content') && !query) {
        alert('  转 砖专转 驻砖!');
        return;
    }

    if(!field && !tag) {
        displayNews(allNews);
        return;
    }

    const filtered = allNews.filter(article => {
        let matchesQuery = true;
        let matchesTag = true;

        if(field) {
            const fieldText = field === 'title' ? article.title : article.content;
            matchesQuery = fieldText.includes(query);
        }

        if(tag) {
            matchesTag = article.tags && article.tags.includes(tag);
        }

        return matchesQuery && matchesTag;
    });

    displayNews(filtered);
}

loadNews();
</script>

</body>
</html>
